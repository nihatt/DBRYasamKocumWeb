<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
    <h:head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous"></link>
        <link rel="stylesheet" href="profilepage.css"/>
        <link rel="preconnect" href="https://fonts.gstatic.com">
            <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=KoHo"/></link>
        <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Bebas+Neue"/>
        <script src="https://kit.fontawesome.com/018c1f74d5.js" crossorigin="anonymous"></script>
        <title>DBR YASAM KOCLUGU</title>

    </h:head>
    <h:body>
                <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top" style="" >
            <div class="container-fluid" >
                <i class="fas fa-child" style="padding: 5px"></i>
                <a class="navbar-brand" href="/dbrsyasamkoc/faces/index.xhtml">DBR Yaşam Koçluğu</a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="/dbrsyasamkoc/faces/index.xhtml">Anasayfa</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/dbrsyasamkoc/faces/yorumlar.xhtml">Yorumlar</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Hizmetlerimiz
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <li><a class="dropdown-item" href="/dbrsyasamkoc/faces/sporhocalari.xhtml">Kişisel Antrenörler</a></li>
                                <li><a class="dropdown-item" href="/dbrsyasamkoc/faces/psikologlar.xhtml">Psikologlar</a></li>

                                <li><a class="dropdown-item" href="/dbrsyasamkoc/faces/yasamkoclari.xhtml">Diyetisyenler</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/dbrsyasamkoc/faces/kendinitani.xhtml" tabindex="-1" aria-disabled="true">Kendini Gör !</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/dbrsyasamkoc/faces/istatistikler.xhtml" tabindex="-1" aria-disabled="true">İstatistiklerimiz</a>
                        </li>
                    </ul>
                    <h:form class="d-flex">

                        <h:commandButton action = "loginPage" rendered="#{!(userBean.loggedIn)}" class="btn btn-outline-success"   value="Giriş Yap | Üye Ol"  style="margin-left: 5px"></h:commandButton>
                        <h:commandButton action = "profilepage?faces-redirect=true"  rendered="#{userBean.loggedIn}"  value="Profil" class="btn btn-warning" style="margin-left: 5px"></h:commandButton>
                        <h:commandButton  rendered="#{userBean.loggedIn}" class="btn btn-danger"   value="Çıkış Yap"  style="margin-left: 5px"
                                          action="#{userBean.cikisYap()}"></h:commandButton>

                    </h:form>
                </div>
            </div>
        </nav>

        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet"></link>
        <h:form prependId="false" id="profil-form">
            <ui:repeat value="#{userBean.profileUser}" var="list">
                <div class="container" style="padding-top: 80px">
                    <div class="row">
                        <div class="col-sm-3">
                            <div class="user-profile__avatar shadow-effect text-center">
                                <h:graphicImage class="img-fluid img-thumbnail" library="images" name="USERS/#{list.user_path}" style=""/>
                                #{list.user_name.toUpperCase()} #{list.user_surname.toUpperCase()}
                                <p class="text-muted">Üye</p>
                            </div>

                            <div class="panel panel-default">
                                <div class="panel-heading">

                                </div>
                                <div class="panel-body" style="display: flex;justify-content: space-between">
                                    <h:form class="d-flex" > 
                                        <h:commandButton  rendered="true" class="btn btn-success btn-block"   value="Kisisel Bilgiler"  style="width: 50vw;"
                                                          onclick="$('#profil-div').modal('show')">
                                            <f:ajax render="profil-render"/>
                                        </h:commandButton>
                                        <h:commandButton action = "#{userBean.cikisYap()}" rendered="true" class="btn btn-danger btn-block"   value="Çıkış Yap"  style="width: 50vw;"></h:commandButton>
                                    </h:form>
                                </div>
                            </div>

                        </div>
                        <div class="col-sm-9">
                            <div class="row">
                                <div class="col-sm-6">

                                    <!-- User name -->
                                    <h3 class="user-profile__title"> #{list.user_name.toUpperCase()} #{list.user_surname.toUpperCase()}</h3>

                                    <!-- User description -->
                                    <p class="user-profile__desc">
                                        DBR's Sağlık Üyesi
                                    </p>
                                    <!-- User URL -->
                                    <div class="user-profile__url">

                                    </div>
                                    <!-- User social links -->
                                    <div class="social" >
                                        <ul class="list-inline" style="display: flex;flex-direction: row;">

                                        </ul>
                                    </div>
                                </div>
                                <div class="col-sm-6">

                                    <!-- Profile info -->
                                    <ul class="user-profile__info">
                                        <li>
                                            <i class="fa fa-calendar-o"></i>  #{list.user_date}
                                        </li>
                                    </ul>
                                </div>

                                <nav>
                                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                        <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">Eğitmenlerim</button>
                                        <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">Yorumlarım</button>

                                    </div>
                                </nav>
                                <div class="tab-content" id="nav-tabContent" >
                                    <div class="tab-pane fade show  active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab" >

                                        <div class="row">
                                            <ui:repeat value="#{userBean.personalTrainerHoca}" var="list">
                                                <div class="col-md-4">
                                                    <div class="card profile-card-1">
                                                        <h:graphicImage library="images" name="#{list.pt_path}" class="background" />
                                                        <h:graphicImage library="images" name="#{list.pt_path}" class="profile" />
                                                        <div class="card-content">
                                                            <h3>#{list.pt_name.toUpperCase()} #{list.pt_surname.toUpperCase()}</h3>
                                                            <div class="icon-block">
                                                                <h:commandButton class="btn btn-outline-info"
                                                                                 onclick="$('#video-modal').modal('show')"
                                                                                 action="#{userBean.actionForVideo(list)}"
                                                                                 value="ÖNERİLEN İÇERİK">
                                                                    <f:ajax render="pt-video-div" />                 

                                                                </h:commandButton>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ui:repeat>
                                            <ui:repeat value="#{userBean.psychologistHoca}" var="list">
                                                <div class="col-md-4">
                                                    <div class="card profile-card-1">
                                                        <h:graphicImage library="images" name="#{list.psych_path}" class="background" />
                                                        <h:graphicImage library="images" name="#{list.psych_path}" class="profile" />
                                                        <div class="card-content">
                                                            <h3>#{list.psych_name.toUpperCase()} #{list.psych_surname.toUpperCase()}</h3>
                                                            <div class="icon-block">
                                                                <h:commandButton class="btn btn-outline-info"
                                                                                 onclick="$('#yazi-modal').modal('show')"
                                                                                 action="#{userBean.actionForYazi(list)}"
                                                                                 value="ÖNERİLEN İÇERİK">
                                                                    <f:ajax render="psych-yazi-div" />                 

                                                                </h:commandButton>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ui:repeat>
                                            <ui:repeat value="#{userBean.nutritionistHoca}" var="list">
                                                <div class="col-md-4">
                                                    <div class="card profile-card-1">
                                                        <h:graphicImage library="images" name="#{list.nut_path}" class="background" />
                                                        <h:graphicImage library="images" name="#{list.nut_path}" class="profile" />
                                                        <div class="card-content">
                                                            <h3>#{list.nut_name.toUpperCase()} #{list.nut_surname.toUpperCase()}</h3>
                                                            <div class="icon-block">
                                                                <h:commandButton class="btn btn-outline-info"
                                                                                 onclick="$('#tarif-modal').modal('show')"
                                                                                 action="#{userBean.actionForTarif(list)}"
                                                                                 value="ÖNERİLEN İÇERİK">
                                                                    <f:ajax render="nut-tarif-div" />                 

                                                                </h:commandButton>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ui:repeat>



                                        </div>
                                    </div>

                                    <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                                        <div class="card-body">
                                            <ui:repeat value="#{userBean.yorumArrayList}" var="list" varStatus="status">
                                                <article class="comment" >
                                                    <a class="comment-img" href="#non">
                                                        <h:graphicImage width="50" height="50" 
                                                                        library="images"
                                                                        name="USERS/#{list.getUser_image()}"/>
                                                    </a>
                                                    <div class="comment-body">
                                                        <div class="text">
                                                            <h:outputText rendered="true" value="#{list.yorum_content}"/>

                                                        </div>

                                                        <div jsf:id="render-button" style="display: flex;justify-content: flex-end">
                                                            <h:commandButton
                                                                onclick="$('#yorum-düzenle-div').modal('show')"
                                                                action="#{userBean.ayarlaStaticYorum(list)}"
                                                                rendered="true" class="btn btn-warning"   value="Düzenle"  
                                                                style="margin-left: 5px;margin-top: 10px;align-items: flex-end">
                                                                    <f:ajax render="render-yorum-düzenle-div"/>
                                                            </h:commandButton>

                                                            <h:commandButton 
                                                                rendered="true" class="btn btn-danger"   value="Sil"  
                                                                style="margin-left: 5px;margin-top: 10px;align-items: flex-end"
                                                                action = "#{userBean.actionYorumuSil(list)}" />

                                                        </div>

                                                    </div>
                                                </article>
                                            </ui:repeat>
                                        </div>


                                    </div>
                                </div>

                            </div>



                        </div> <!-- / .row -->
                    </div>
                </div> <!-- / .row -->
            </ui:repeat>
        </h:form>
        <h:form prependId="false" >      
            <div id="video-modal" class="modal" tabindex="-1" >
                <div jsf:id="pt-video-div" class="modal-dialog" >
                    <div class="modal-content" >
                        <div class="modal-header">
                            <h5  id="render-header1" class="modal-title">#{userBean.getNameOfVideo()}</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body" width="600" height="400" >
                            <p >
                                <iframe width="450" height="315" src="https://www.youtube.com/embed/#{userBean.getLinkOfVideo()}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="true"></iframe>

                            </p>
                        </div>
                        <div class="modal-footer">
                            <h:commandButton class="btn btn-secondary" p:data-bs-dismiss="modal"
                                             value="VIDEOYU KAPAT"
                                             action="profilepage"/>

                        </div>
                    </div>
                </div>
            </div>
        </h:form>    
        <h:form prependId="false" >      
            <div  id="tarif-modal" class="modal" tabindex="-1" >
                <div jsf:id="nut-tarif-div" class="modal-dialog" >
                    <div class="modal-content" >
                        <div class="modal-header">
                            <h5  class="modal-title">#{userBean.getNameOfTarif()}</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body" width="600" height="400" >
                            <p >
                                <iframe width="450" height="315" src="https://www.nefisyemektarifleri.com/#{userBean.getLinkOfTarif()}" ></iframe>

                            </p>
                        </div>
                        <div class="modal-footer">
                            <h:commandButton class="btn btn-secondary" p:data-bs-dismiss="modal"
                                             value="TARİFİ KAPAT"
                                             action="profilepage"/>

                        </div>
                    </div>
                </div>
            </div>
        </h:form>  
        <h:form prependId="false" >      
            <div  id="yazi-modal" class="modal" tabindex="-1" >
                <div jsf:id="psych-yazi-div" class="modal-dialog" >
                    <div class="modal-content" >
                        <div class="modal-header">
                            <h5  class="modal-title">#{userBean.getNameOfYazi()}</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body" width="600" height="400" >
                            <p >
                                <iframe width="450" height="315" src="https://www.uplifers.com/#{userBean.getLinkOfYazi()}" ></iframe>

                            </p>
                        </div>
                        <div class="modal-footer">
                            <h:commandButton class="btn btn-secondary" p:data-bs-dismiss="modal"
                                             value="YAZIYI KAPAT"
                                             action="profilepage"/>

                        </div>
                    </div>
                </div>
            </div>
        </h:form>  
        <h:form prependId="false">
            <div id="profil-div" class="modal" tabindex="-1">
                <div jsf:id="profil-render" class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">#{userBean.user_name} #{userBean.user_surname}</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <p>
                                <h:outputText value="Dogum Tarihi : "/>
                                <h:outputText value="#{userBean.user_date}"/>
                                <br/>
                                <h:outputText value="E-mail Adresi :"/>
                                <h:outputText value="#{userBean.user_mail}"/>
                                <br/>
                                <h:outputText value="İsim :"/>
                                <h:outputText value="#{userBean.user_name}"/>
                                <br/>
                                <h:outputText value="İsim :"/>
                                <h:outputText value="#{userBean.user_surname}"/>
                                <br/>
                                <h:commandLink 
                                    onclick="$('#sifre-degis-div').modal('show')"
                                    value="Sifre Değistir">
                                    <f:ajax render="sifre-degis"/>
                                </h:commandLink>

                            </p>
                        </div>
                        <div class="modal-footer">

                        </div>
                    </div>
                </div>
            </div>
        </h:form>
        <h:form prependId="false">
            <div id="sifre-degis-div" class="modal" tabindex="-1">
                <div jsf:id="sifre-render" class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Sifre Degis</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <p>
                                <h:panelGroup  >
                                    <h:outputText value="Yeni Sifrenizi Giriniz."/>
                                    <h:inputText id="sign-reset-pass" p:type="password" class="input" p:data-type="password"
                                                 value="#{userBean.password_reset}"
                                                 p:placeholder="Yeni Sifre"
                                                 requiredMessage="Lütfen şifrenizi giriniz"/>
                                    <h:commandButton value="sifre degis" 
                                                     action="#{userBean.actionSifreReset()}"/>
                                    <br/>
                                    <h:graphicImage library="images" name="/icons/lock.png" />

                                </h:panelGroup>
                            </p>
                        </div>
                        <div class="modal-footer">

                        </div>
                    </div>
                </div>
            </div>
        </h:form>
        <h:form prependId="false"  >
            <div id="yorum-düzenle-div" class="modal" tabindex="-1">
                <div jsf:id="render-yorum-düzenle-div" class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Mesaj İçeriğini Düzenle</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <p>
                                <h:inputTextarea value="#{userBean.tempYorum}"
                                                 rows="3" style="height: 169px;min-width: 25vw;margin-top: 15px" 
                                                 p:maxlength="400" >
                                   
                                </h:inputTextarea>
                            </p>
                        </div>
                        <div class="modal-footer">
                            
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Iptal Et</button>
                            <h:commandButton  value="Yorumu Düzenle" class="btn btn-primary"
                                              action="#{userBean.düzenleYorumu()}">
                                
                            </h:commandButton>
                        </div>
                    </div>
                </div>
            </div>

        </h:form>


        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </h:body>
</html>